<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tewi's Mochi Pounding Game</title>
    <link href="assets/css/nunito.css" rel="stylesheet">
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" media="all">
    <link href="assets/css/style.css" rel="stylesheet" media="all">
</head>

<body>
<div id="chatStream"></div>
<div class="game-container">
    <h1 class="text-center font-bunny intro-header intro-group" style="position: absolute; top: 250px; left: 50%; transform: translate(-50%, -50%);"></h1>
    <div class="d-flex justify-content-center intro-group tutorial-group" style="position: relative; top: 50px; display: none !important;">
        <div class="tutorial-card card" style="width: 0px; height: 0px;">
            <div class="card-body" style="position: relative; font-size: 32px;">
                <div class="tutorial-text text-center font-bunny" data-sequence="0">
                </div>
                <div class="tutorial-text text-center font-bunny mt-2" data-sequence="1">
                </div>
                <div class="tutorial-text text-center font-bunny mt-2" data-sequence="2">
                </div>
                <div class="tutorial-text text-center mt-2" data-sequence="3" style="display: none;">
                    <button class="tutorial-button btn btn-primary" data-button_sequence="0" style="margin: auto; width: 225px;">Unassuming Button</button>
                </div>
                <div class="tutorial-text text-center font-bunny mt-2" data-sequence="4">
                </div>
                <div class="tutorial-text text-center font-bunny mt-2" data-sequence="5">
                </div>
                 <div class="tutorial-text text-center mt-2" data-sequence="6" style="display: none;">
                    <button class="tutorial-button btn btn-primary" data-button_sequence="1" style="margin: auto; width: 225px;">Continue</button>
                </div>
            </div>
        </div>
    </div>
    <h1 class="text-center font-bunny game-group" style="display: none;">Tewi's Mochi Pounding Game</h1>
    <div class="d-flex justify-content-center game-group" style="position: relative; display: none !important; left: -124px;">
        <div class="credits-card card me-2" style="height: 410px; width: 300px; left: 445px; overflow: auto;">
            <div class="card-header text-center">
                <div style="height: 25px;">
                    Credits
                </div>
            </div>
            <div class="card-body text-center" style="position: relative;">
                <div>
                    <div>
                        Made By
                    </div>
                    <div style="margin-top: -4px;">
                        <b>TanniMachine</b>
                    </div>
                    <div class="mt-2">
                        Lead Dev
                    </div>
                    <div style="margin-top: -4px;">
                        <b>AwesomeWulfz</b>
                    </div>
                    <div class="mt-2">
                        For
                    </div>
                    <div style="margin-top: -4px;">
                        <b>CIIT Automatablabla</b>
                    </div>
                    <hr>
                    <div class="mt-2">
                        Game Assets
                    </div>
                    <div class="mt-2">
                        Icons
                    </div>
                    <div style="margin-top: -4px;">
                        <b>Touhou Mystia's Izakaya</b>
                    </div>
                    <div class="mt-2">
                        Fever & End Screen Sounds
                    </div>
                    <div style="margin-top: -4px;">
                        <b>Muse Dash</b>
                    </div>
                    <div class="mt-2">
                        Normal Mode Song
                    </div>
                    <div style="margin-top: -4px;">
                        <b>dBu - Ice Milk Tei</b>
                    </div>
                    <div class="mt-2">
                        Zen Mode Song
                    </div>
                    <div style="margin-top: -4px;">
                        <b>Persona - Heaven</b>
                    </div>
                    <div class="mt-2">
                        Main Menu & Normal Mode Image
                    </div>
                    <div style="margin-top: -4px;">
                        <b>nekoguruma</b>
                    </div>
                    <div class="mt-2">
                        Normal Mode End Screen Image
                    </div>
                    <div style="margin-top: -4px;">
                        <b>chunmarupi</b>
                    </div>
                    <div class="mt-2">
                        Zen Mode Image
                    </div>
                    <div style="margin-top: -4px;">
                        <b>Sami / PirateYoukai</b>
                    </div>
                </div>
            </div>
        </div>
        <div class="perfect-meter-card card me-2" style="height: 410px; left: 150px;">
            <div class="card-header text-center">
                <div style="height: 25px;">
                    Perfect Meter
                </div>
            </div>
            <div class="card-body text-center" style="position: relative; user-select: none; pointer-events: none;">
                <div class="progress vertical">
                    <div class="perfect-meter progress-bar" role="progressbar" style="height: 0%; background-color: #ffe7da;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div style="position: absolute; bottom: 5px; left: 10px;">
                    <img class="perfect-meter-contanier" src="assets/images/combo_meter.png" width="104" height="104">
                </div>
                <div class="perfect-meter-text wiggle-short" style="position: absolute; font-weight: bold; left: 35px; bottom: 30px;">
                    <div>
                        <span class="perfect-meter-text-fever" style="font-size: 16px; display: none;">FEVER!</span>
                        <span class="perfect-meter-text-main perfect-meter-text-number" style="font-size: 24px;">2</span>
                    </div>
                    <div style="margin-top: -8px;">
                        <span class="perfect-meter-text-fever" style="display: none;">⠀</span>
                        <span class="perfect-meter-text-main">Perfect!</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="card" style="width: 387px; height: 410px;">
            <div class="card-header text-center">
                <div class="title-group">
                    How many can you pound in 3 minutes?
                </div>
                <div class="spacer timer-group" style="display: none;"></div>
                <div class="progress-container timer-group" style="display: none;">
                    <div class="progress" style="position: relative;">
                        <div id="progressBar" class="progress-bar" role="progressbar" style="width: 100%; background-color: #da7462;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                        <div id="timer" style="position: absolute; width: 100%; font-size: 24px; text-align: center; color: white; top: 2px;">03:00</div>
                    </div>
                </div>
            </div>
            <img src="assets/images/kine.jpeg" class="tewi-image card-img-top" alt="Rabbit Image">
            <div class="card-body text-center" style="position: relative;">
                <h5 class="card-title" style="font-weight: bold;"><img src="assets/images/CuisineIconMochi.png" width="24" height="24"> <span id="points">0</span> <span style="font-size: 14px;">(<span id="ppsDisplay">0.00</span>/s)</span></h5>
                <div style="overflow: none; position: absolute; width: 100%; left: 0px;">
                    <div class="d-flex">
                        <button class="start-btn btn btn-success" data-mode="normal" style="display: block; margin: auto; width: 125px; height: 40px;">Start!</button>
                        <button class="start-btn btn btn-success" data-mode="zen" style="display: block; margin: auto; width: 125px; height: 40px;">Zen Mode</button>
                    </div>
                    <button id="poundMochiBtn" class="btn btn-primary" style="display: none; margin: auto; width: 175px;">Pound Mochi</button>
                </div>
            </div>
        </div>
        <div class="d-flex flex-column ms-2">
            <div class="medals-card card" style="height: 201px; left: -210px; z-index: -1;">
                <div class="card-header text-center">
                    <div style="height: 25px;">
                        Medals
                    </div>
                </div>
                <div class="card-body" style="position: relative;">
                    <div class="text-center">
                        Finish the game with...
                    </div>
                    <table class="mt-2">
                        <tbody>
                            <tr class="medals" data-medal="bronze">
                                <td><span style="color: brown;"><i class="bi bi-circle" style="vertical-align: 0;"></i> Bronze: </span></td>
                                <td><img src="assets/images/CuisineIconMochi.png" width="24" height="24"> 2,000</td>
                            </tr>
                            <tr class="medals" data-medal="silver">
                                <td><span style="color: #8e8e8e;"><i class="bi bi-circle" style="vertical-align: 0;"></i> Silver:</td>
                                <td></span> <img src="assets/images/CuisineIconMochi.png" width="24" height="24"> 3,000</td>
                            </tr>
                            <tr class="medals" data-medal="gold">
                                <td><span style="color: #ffcc00;"><i class="bi bi-circle" style="vertical-align: 0;"></i> Gold:</td>
                                <td></span> <img src="assets/images/CuisineIconMochi.png" width="24" height="24"> 5,000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="achievements-card card" style="height: 201px; top: 8px; width: 195px; left: -210px; z-index: -1;">
                <div class="card-header text-center">
                    <div style="height: 25px;">
                        Achievements
                    </div>
                </div>
                <div class="card-body text-center" style="position: relative; overflow: auto;">
                    <div>
                        <img data-bs-toggle="tooltip" data-bs-placement="top" title="Tooltip on top" src="assets/images/CuisineIconMochi.png" width="48" height="48" style="filter: grayscale(100%); padding: 4px;">
                        <img src="assets/images/ItemIconLuckyRabbit.png" width="48" height="48" style="filter: grayscale(100%); padding: 4px;">
                        <img src="assets/images/ItemIconLuckyClover.png" width="48" height="48" style="filter: grayscale(100%); padding: 4px;">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- <div class="mt-4 upgrades-group" style="display: none;">
        <h2 class="font-bunny">「Upgrades」</h2>
    </div> -->
    <div class="upgrades-container upgrades-group" style="display: none; margin-top: 4rem;">
        <div id="upgrades" class="mt-2 d-flex flex-wrap justify-content-center" style="display: none;">
        </div>
    </div>
</div>
<!-- Audios -->
<audio id="crit_sound" src="assets/audio/crit.mp3" preload="auto"></audio>
<audio id="click_mochi_sound" src="assets/audio/mochi_sound_01.mp3" preload="auto"></audio>
<audio id="key_mochi_sound" src="assets/audio/mochi_sound_02.mp3" preload="auto"></audio>
<audio id="ice_milk_tei" src="assets/audio/DBU (iCE MiLK TEi) 04 (128 kbps).mp3" preload="auto"></audio>
<audio id="heaven" src="assets/audio/Heaven (Instrumental) - Persona 4.mp3" preload="auto"></audio>
<audio id="fever" src="assets/audio/fever.mp3" preload="auto"></audio>
<audio id="muse_end" src="assets/audio/museEnd.mp3" preload="auto"></audio>

<!-- jQuery -->
<script src="assets/js/jquery-3.6.0.min.js"></script>
<script src="assets/js/jquery-ui.js"></script>

<!-- Bootstrap JS -->
<script src="assets/js/popper.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>

<!-- Custom JS -->
<script src="assets/js/helper.js"></script>
<script>
var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl)
})
$(document).ready(function () {
    // Create an audio element for the sound effect
    const crit_sound = document.getElementById('crit_sound');
    const click_mochi_sound = document.getElementById('click_mochi_sound');
    const key_mochi_sound = document.getElementById('key_mochi_sound');
    const fever = document.getElementById('fever');
    const muse_end = document.getElementById('muse_end');
    const ice_milk_tei = document.getElementById('ice_milk_tei');
    const heaven = document.getElementById('heaven');

    let has_viewed_tutorial = localStorage.getItem('has_viewed_tutorial');

    if (!has_viewed_tutorial) {
        setTimeout(function() {
            teletype('intro-header', 'こんばんてい～！てゐです！', 1500);
        }, 1000);
        setTimeout(function() {
            convertText('intro-header', 'Hello! Tewi here!', 2500);
        }, 3000);
        setTimeout(function() {
            $('.intro-header').animate({
                'top': '25px'
            }, 1000);
        }, 6000);
        setTimeout(function() {
            $('.tutorial-group').show();
            animateDimensions('tutorial-card', '387px', '512px', 1850);
        }, 7500);
        setTimeout(function() {
            teletype('tutorial-text[data-sequence="0"]', 'Welcome to our incremental rhythm game!', 2250);
        }, 11750);
        setTimeout(function() {
            teletype('tutorial-text[data-sequence="1"]', `Today, you'll be pounding mochi!`, 2250);
        }, 14250);
        setTimeout(function() {
            teletype('tutorial-text[data-sequence="2"]', `But first, let's begin with the instructions...`, 2250);
        }, 16750);
        setTimeout(function() {
            $('.tutorial-text[data-sequence="3"]').fadeIn();
            teletype('tutorial-text[data-sequence="4"]', `Try clicking on that button!`, 1250);
        }, 19250);
    } else {
        $('.intro-group').removeClass('d-flex').hide();
        $('.game-group').show();

        game_sequence = 100;
    }

    let medal_bronze = localStorage.getItem('medal_bronze');
    if (medal_bronze) {
        animateShine('.medals[data-medal="bronze"]', 400);
        $('.medals[data-medal="bronze"] span i').addClass('bi-check2-circle').removeClass('bi-circle');
    }
    let medal_silver = localStorage.getItem('medal_silver');
    if (medal_silver) {
        animateShine('.medals[data-medal="silver"]', 400);
        $('.medals[data-medal="silver"] span i').addClass('bi-check2-circle').removeClass('bi-circle');
    }
    let medal_gold = localStorage.getItem('medal_gold');
    if (medal_gold) {
        animateShine('.medals[data-medal="gold"]', 400);
        $('.medals[data-medal="gold"] span i').addClass('bi-check2-circle').removeClass('bi-circle');
    }

    let has_played_before = localStorage.getItem('has_played_before');
    if (has_played_before) {
        $('.medals-card').css('z-index', 0).css('left', '0px');
        $('.achievements-card').css('z-index', 0).css('left', '0px');
    }
});
</script>
<script src="assets/js/game.js"></script>
<script src="assets/js/upgrades.js"></script>
</body>
</html>